From d6e3193c2a22024e213025523d2abba36f4b7bb3 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Marco=20Trevisan=20=28Trevi=C3=B1o=29?= <mail@3v1n0.net>
Date: Thu, 12 Oct 2017 20:07:12 -0500
Subject: [PATCH 11/11] workspace: ensure that workarea data is valid when
 fetching by monitor num

https://bugzilla.gnome.org/show_bug.cgi?id=788860
---
 src/core/workspace.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/src/core/workspace.c b/src/core/workspace.c
index f6d3c9619..901de4541 100644
--- a/src/core/workspace.c
+++ b/src/core/workspace.c
@@ -1099,13 +1099,16 @@ meta_workspace_get_work_area_for_monitor (MetaWorkspace *workspace,
   MetaLogicalMonitor *logical_monitor;
   MetaWorkspaceLogicalMonitorData *data;
 
-  ensure_work_areas_validated (workspace);
-
   logical_monitor =
     meta_monitor_manager_get_logical_monitor_from_number (monitor_manager,
                                                           which_monitor);
+  g_return_if_fail (logical_monitor != NULL);
+
+  ensure_work_areas_validated (workspace);
   data = meta_workspace_get_logical_monitor_data (workspace, logical_monitor);
 
+  g_return_if_fail (data != NULL);
+
   *area = data->logical_monitor_work_area;
 }
 
-- 
2.14.1

