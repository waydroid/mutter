From: Adam Jackson <ajax@redhat.com>
Date: Wed, 6 Mar 2019 12:15:40 -0500
Subject: cogl: Remove unused CoglTextureDriver::try_setting_gl_border_color

https://gitlab.gnome.org/GNOME/mutter/merge_requests/480

Origin: upstream, commit:555a2c8eba115425a81d7b84f3ca2163493c0d4
Applied-Upstream: 3.32.1
---
 cogl/cogl/cogl-texture-driver.h                     |  9 ---------
 cogl/cogl/driver/gl/gl/cogl-texture-driver-gl.c     | 14 --------------
 cogl/cogl/driver/gl/gles/cogl-texture-driver-gles.c | 10 ----------
 3 files changed, 33 deletions(-)

diff --git a/cogl/cogl/cogl-texture-driver.h b/cogl/cogl/cogl-texture-driver.h
index f77c548..a6e7d4f 100644
--- a/cogl/cogl/cogl-texture-driver.h
+++ b/cogl/cogl/cogl-texture-driver.h
@@ -171,15 +171,6 @@ struct _CoglTextureDriver
                          int height,
                          int depth);
 
-  /*
-   * This driver abstraction is needed because GLES doesn't support setting
-   * a texture border color.
-   */
-  void
-  (* try_setting_gl_border_color) (CoglContext *ctx,
-                                   GLuint gl_target,
-                                   const GLfloat *transparent_color);
-
   /*
    * It may depend on the driver as to what texture targets may be used when
    * creating a foreign texture. E.g. OpenGL supports ARB_texture_rectangle
diff --git a/cogl/cogl/driver/gl/gl/cogl-texture-driver-gl.c b/cogl/cogl/driver/gl/gl/cogl-texture-driver-gl.c
index fbb55de..35b87f7 100644
--- a/cogl/cogl/driver/gl/gl/cogl-texture-driver-gl.c
+++ b/cogl/cogl/driver/gl/gl/cogl-texture-driver-gl.c
@@ -485,19 +485,6 @@ _cogl_texture_driver_size_supported (CoglContext *ctx,
   return new_width != 0;
 }
 
-static void
-_cogl_texture_driver_try_setting_gl_border_color
-                                       (CoglContext *ctx,
-                                        GLuint gl_target,
-                                        const GLfloat *transparent_color)
-{
-  /* Use a transparent border color so that we can leave the
-     color buffer alone when using texture co-ordinates
-     outside of the texture */
-  GE( ctx, glTexParameterfv (gl_target, GL_TEXTURE_BORDER_COLOR,
-                             transparent_color) );
-}
-
 static gboolean
 _cogl_texture_driver_allows_foreign_gl_target (CoglContext *ctx,
                                                GLenum gl_target)
@@ -541,7 +528,6 @@ _cogl_texture_driver_gl =
     _cogl_texture_driver_gl_get_tex_image,
     _cogl_texture_driver_size_supported,
     _cogl_texture_driver_size_supported_3d,
-    _cogl_texture_driver_try_setting_gl_border_color,
     _cogl_texture_driver_allows_foreign_gl_target,
     _cogl_texture_driver_find_best_gl_get_data_format
   };
diff --git a/cogl/cogl/driver/gl/gles/cogl-texture-driver-gles.c b/cogl/cogl/driver/gl/gles/cogl-texture-driver-gles.c
index 17f529e..f773f93 100644
--- a/cogl/cogl/driver/gl/gles/cogl-texture-driver-gles.c
+++ b/cogl/cogl/driver/gl/gles/cogl-texture-driver-gles.c
@@ -590,15 +590,6 @@ _cogl_texture_driver_size_supported (CoglContext *ctx,
   return width <= max_size && height <= max_size;
 }
 
-static void
-_cogl_texture_driver_try_setting_gl_border_color
-                                            (CoglContext *ctx,
-                                             GLuint gl_target,
-                                             const GLfloat *transparent_color)
-{
-  /* FAIL! */
-}
-
 static gboolean
 _cogl_texture_driver_allows_foreign_gl_target (CoglContext *ctx,
                                                GLenum gl_target)
@@ -636,7 +627,6 @@ _cogl_texture_driver_gles =
     _cogl_texture_driver_gl_get_tex_image,
     _cogl_texture_driver_size_supported,
     _cogl_texture_driver_size_supported_3d,
-    _cogl_texture_driver_try_setting_gl_border_color,
     _cogl_texture_driver_allows_foreign_gl_target,
     _cogl_texture_driver_find_best_gl_get_data_format
   };
